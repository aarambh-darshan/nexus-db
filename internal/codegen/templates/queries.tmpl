// Code generated by Nexus. DO NOT EDIT.
package {{.PackageName}}

import (
	"context"

	"github.com/nexus-db/nexus/pkg/dialects"
	"github.com/nexus-db/nexus/pkg/query"
)

// DB wraps a database connection with type-safe query methods.
type DB struct {
	conn *dialects.Connection
}

// NewDB creates a new DB wrapper.
func NewDB(conn *dialects.Connection) *DB {
	return &DB{conn: conn}
}

{{range .Models}}
// {{.Name}}Query returns a query builder for {{.Name}}.
func (db *DB) {{.Name}}Query() *query.Builder {
	return query.New(db.conn, "{{.Name}}")
}

// Create{{.Name}} inserts a new {{.Name}} record.
func (db *DB) Create{{.Name}}(ctx context.Context, data map[string]interface{}) (query.Result, error) {
	return db.{{.Name}}Query().Insert(data).Returning("*").One(ctx)
}

// Find{{.Name}}ByID finds a {{.Name}} by ID.
func (db *DB) Find{{.Name}}ByID(ctx context.Context, id interface{}) (query.Result, error) {
	return db.{{.Name}}Query().Select().Where(query.Eq("id", id)).One(ctx)
}

// FindAll{{.Name}}s returns all {{.Name}} records.
func (db *DB) FindAll{{.Name}}s(ctx context.Context) (query.Results, error) {
	return db.{{.Name}}Query().Select().All(ctx)
}

// Update{{.Name}} updates a {{.Name}} by ID.
func (db *DB) Update{{.Name}}(ctx context.Context, id interface{}, data map[string]interface{}) (int64, error) {
	return db.{{.Name}}Query().Update(data).Where(query.Eq("id", id)).Exec(ctx)
}

// Delete{{.Name}} deletes a {{.Name}} by ID.
func (db *DB) Delete{{.Name}}(ctx context.Context, id interface{}) (int64, error) {
	return db.{{.Name}}Query().Delete().Where(query.Eq("id", id)).Exec(ctx)
}
{{end}}
